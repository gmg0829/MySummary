## 1.7之前
![memory](
  ./memory-1.png)
## 1.8
![memory](
  ./memory-2.png)  

  1.8同1.7比，最大的差别就是：元数据区取代了永久代。元空间的本质和永久代类似，都是对JVM规范中方法区的实现。
  不过元空间与永久代之间最大的区别在于：元数据空间并不在虚拟机中，而是使用本地内存。

![memory](
  ./memory-3.png) 


- 程序计数器：它的生命周期与线程相同，线程私有。较小的内存区域，用以完成分支、循环、跳转、异常处理、线程恢复等基础功能。不会发生内存溢出(OutOfMemory=OOM)错误。
- 虚拟机栈：它的生命周期与线程相同，线程私有。虚拟机栈中存储了方法执行时相关信息，每个方法在调用时都会在虚拟机栈中创建一个方法帧，方法帧中包含了局部变量，参数，运行中间结果等信息。帧数超过限制（-Xss），就会出现StackOverFlow(=SOF)错误。另外超过线程分配的内存大小，也会报OOM错误。
![stack](
  ./stack.jfif) 
- 本地方法栈：它的生命周期与线程相同，线程私有。基本同虚拟机栈。存放的是native方法帧。可出现SOF和OOM错误。
- 元空间（MetaSpace）：所有线程共享。存放class加载相关信息。
- 堆：所有线程共享。存放new出来的数组和对象数据，以及类的静态变量。同时，包含一个常量池（final），是由1.7以前版本的方法区转移过来的。

